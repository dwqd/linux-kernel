b  vfs_write 

b arm_syscall

b do_sys_poll   ->>>>> 用这个来通讯

b tty_ioctl

b __se_sys_gettimeofday

b  sys_ni_syscall

b  sys_restart_syscall



b sys_syscall

b vector_swi 产生swi中断 各种读取信息都在这里

rmdir

```c++
i registers eax


/home/jonyang/v-kernel-qemu/src/linux-5.6.11/arch/arm/kernel/entry-common.S  //swi 运行文件
/home/jonyang/v-kernel-qemu/src/linux-5.6.11/arch/arm64/include/asm/unistd32.h
```

 

opendir(path);

readdir(dir)

是通过SWI(Software Interrupt)的方式陷入内核态的

```c++
(gdb) disassemble vector_swi   // 返汇编这个函数
Dump of assembler code for function vector_swi:
   0x80100160 <+0>:	sub	sp, sp, #72	; 0x48
   0x80100164 <+4>:	stm	sp, {r0, r1, r2, r3, r4, r5, r6, r7, r8, r9, r10, r11, r12}
   0x80100168 <+8>:	add	r8, sp, #60	; 0x3c
   0x8010016c <+12>:	stmdb	r8, {sp, lr}^
   0x80100170 <+16>:	mrs	r8, SPSR
   0x80100174 <+20>:	str	lr, [sp, #60]	; 0x3c
   0x80100178 <+24>:	str	r8, [sp, #64]	; 0x40
   0x8010017c <+28>:	str	r0, [sp, #68]	; 0x44
   0x80100180 <+32>:	mrc	15, 0, r12, cr1, cr0, {0}
   0x80100184 <+36>:	ldr	r10, [pc, #212]	; 0x80100260 <__cr_alignment>
   0x80100188 <+40>:	ldr	r10, [r10]
   0x8010018c <+44>:	teq	r10, r12
   0x80100190 <+48>:	mcrne	15, 0, r10, cr1, cr0, {0}
   0x80100194 <+52>:	cpsie	i
   0x80100198 <+56>:	mov	r8, #81	; 0x51
   0x8010019c <+60>:	mcr	15, 0, r8, cr3, cr0, {0}
   0x801001a0 <+64>:	isb	sy
   0x801001a4 <+68>:	add	r8, pc, #184	; 0xb8
   0x801001a8 <+72>:	lsr	r9, sp, #13
   0x801001ac <+76>:	lsl	r9, r9, #13
   0x801001b0 <+80>:	ldr	r10, [r9]
   0x801001b4 <+84>:	push	{r4, r5}
   0x801001b8 <+88>:	tst	r10, #240	; 0xf0
   0x801001bc <+92>:	bne	0x801001f0 <__sys_trace>
   0x801001c0 <+96>:	mov	r10, r7			//--------------------r7就是系统调用号
   0x801001c4 <+100>:	cmp	r10, #444	; 0x1bc
   0x801001c8 <+104>:	movcs	r10, #0
   0x801001cc <+108>:	csdb
   0x801001d0 <+112>:	sub	lr, pc, #376	; 0x178
--Type <RET> for more, q to quit, c to continue without paging--
   0x801001d4 <+116>:	ldrcc	pc, [r8, r10, lsl #2]
   0x801001d8 <+120>:	add	r1, sp, #8
   0x801001dc <+124>:	cmp	r7, #983040	; 0xf0000
   0x801001e0 <+128>:	eor	r0, r7, #0
   0x801001e4 <+132>:	bcs	0x8010b98c <arm_syscall>
   0x801001e8 <+136>:	mov	r8, #0
   0x801001ec <+140>:	b	0x80142a84 <sys_ni_syscall>
End of assembler dump.          
```







54 120  57 114 20

174 11 45 122 85 199  197

78 195 322 217 196 















### // 命令行date 分析

1. 回车执行的一次`__se_sys_read (fd=0, buf=2122959137, count=1) at fs/read_write.c:642`
2. `__se_sys_write (fd=1, buf=1520168, count=1) at fs/read_write.c:667`
3. `__se_sys_ioctl (fd=0, cmd=21506, arg=2122959020) at fs/ioctl.c:739`